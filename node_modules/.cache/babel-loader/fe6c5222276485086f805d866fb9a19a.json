{"ast":null,"code":"// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\nimport Rails from \"@rails/ujs\";\nimport Turbolinks from \"turbolinks\";\nimport * as ActiveStorage from \"@rails/activestorage\";\nimport \"channels\";\nRails.start();\nTurbolinks.start();\nActiveStorage.start(); // \n\ndocument.getElementById(\"smsbtn\").addEventListener('click', sendCode);\n\nfunction sendCode() {\n  // document.getElementById(\"basic-addon2\").innerHTML = Date.now();\n  var phone_number = document.getElementById(\"user_phone_number\").value;\n  console.log(phone_number);\n\n  if (phone_number == \"\" || phone_number == null || typeof phone_number == undefined || phone_number.length < 11) {\n    alert(\"请输入电话号码\");\n  } else {\n    console.log(\"** success **\");\n    var xmlhttp;\n\n    if (window.XMLHttpRequest) {\n      xmlhttp = new XMLHttpRequest();\n    } else {\n      xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n\n    xmlhttp.onreadystatechange = function () {\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        var mydata = xmlhttp.responseText;\n\n        if (mydata == \"ok\") {\n          document.getElementById(\"smsbtn\").value = \"已发送\";\n        } else {\n          alert(\"请稍后重试！\");\n        }\n      }\n    };\n\n    xmlhttp.open(\"get\", \"<%= bindPhone_path %>?phone=\" + phone_number + \"&&t=\" + Math.random(), true); // xmlhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n\n    xmlhttp.send();\n  }\n}","map":{"version":3,"sources":["/Users/abadboy/Documents/works/dbchain-blog-rails/app/javascript/packs/application.js"],"names":["Rails","Turbolinks","ActiveStorage","start","document","getElementById","addEventListener","sendCode","phone_number","value","console","log","undefined","length","alert","xmlhttp","window","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","status","mydata","responseText","open","Math","random","send"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,YAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,KAAKC,aAAZ,MAA+B,sBAA/B;AACA,OAAO,UAAP;AAEAF,KAAK,CAACG,KAAN;AACAF,UAAU,CAACE,KAAX;AACAD,aAAa,CAACC,KAAd,G,CAEA;;AACAC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCC,gBAAlC,CAAmD,OAAnD,EAA2DC,QAA3D;;AACA,SAASA,QAAT,GAAmB;AACjB;AACA,MAAIC,YAAY,GAAGJ,QAAQ,CAACC,cAAT,CAAwB,mBAAxB,EAA6CI,KAAhE;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;;AACA,MAAGA,YAAY,IAAI,EAAhB,IAAsBA,YAAY,IAAI,IAAtC,IAA8C,OAAOA,YAAP,IAAuBI,SAArE,IAAkFJ,YAAY,CAACK,MAAb,GAAsB,EAA3G,EAA8G;AAC5GC,IAAAA,KAAK,CAAC,SAAD,CAAL;AACD,GAFD,MAEK;AACHJ,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,QAAII,OAAJ;;AACA,QAAIC,MAAM,CAACC,cAAX,EACA;AACEF,MAAAA,OAAO,GAAC,IAAIE,cAAJ,EAAR;AACD,KAHD,MAGO;AACLF,MAAAA,OAAO,GAAC,IAAIG,aAAJ,CAAkB,mBAAlB,CAAR;AACD;;AACDH,IAAAA,OAAO,CAACI,kBAAR,GAA2B,YAC3B;AACE,UAAIJ,OAAO,CAACK,UAAR,IAAoB,CAApB,IAAyBL,OAAO,CAACM,MAAR,IAAgB,GAA7C,EACA;AACE,YAAIC,MAAM,GAAGP,OAAO,CAACQ,YAArB;;AACA,YAAGD,MAAM,IAAE,IAAX,EAAgB;AACdlB,UAAAA,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCI,KAAlC,GAA0C,KAA1C;AACD,SAFD,MAEK;AACHK,UAAAA,KAAK,CAAC,QAAD,CAAL;AACD;AACF;AACF,KAXD;;AAYAC,IAAAA,OAAO,CAACS,IAAR,CAAa,KAAb,EAAmB,iCAA+BhB,YAA/B,GAA4C,MAA5C,GAAqDiB,IAAI,CAACC,MAAL,EAAxE,EAAsF,IAAtF,EArBG,CAsBH;;AACAX,IAAAA,OAAO,CAACY,IAAR;AACD;AACF","sourcesContent":["// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n//= require jquery3\n//= require popper\n//= require bootstrap-sprockets\n\nimport Rails from \"@rails/ujs\"\nimport Turbolinks from \"turbolinks\"\nimport * as ActiveStorage from \"@rails/activestorage\"\nimport \"channels\"\n\nRails.start()\nTurbolinks.start()\nActiveStorage.start()\n\n// \ndocument.getElementById(\"smsbtn\").addEventListener('click',sendCode);\nfunction sendCode(){\n  // document.getElementById(\"basic-addon2\").innerHTML = Date.now();\n  var phone_number = document.getElementById(\"user_phone_number\").value;\n  console.log(phone_number)\n  if(phone_number == \"\" || phone_number == null || typeof phone_number == undefined || phone_number.length < 11){\n    alert(\"请输入电话号码\");\n  }else{\n    console.log(\"** success **\");\n    var xmlhttp;\n    if (window.XMLHttpRequest)\n    {\n      xmlhttp=new XMLHttpRequest();\n    } else {\n      xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    xmlhttp.onreadystatechange=function()\n    {\n      if (xmlhttp.readyState==4 && xmlhttp.status==200)\n      {\n        let mydata = xmlhttp.responseText;\n        if(mydata==\"ok\"){\n          document.getElementById(\"smsbtn\").value = \"已发送\";\n        }else{\n          alert(\"请稍后重试！\")\n        }\n      }\n    }\n    xmlhttp.open(\"get\",\"<%= bindPhone_path %>?phone=\"+phone_number+\"&&t=\" + Math.random(),true);\n    // xmlhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");\n    xmlhttp.send();\n  }\t\n}"]},"metadata":{},"sourceType":"module"}